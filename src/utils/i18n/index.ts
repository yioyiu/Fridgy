import { create } from 'zustand';
import { persist, createJSONStorage } from 'zustand/middleware';
import AsyncStorage from '@react-native-async-storage/async-storage';

// 支持的语言
export const SUPPORTED_LANGUAGES = {
  en: 'English',
  zh: '中文',
  es: 'Español',
  fr: 'Français',
  de: 'Deutsch',
  ja: '日本語',
  ko: '한국어',
} as const;

export type LanguageCode = keyof typeof SUPPORTED_LANGUAGES;

// 翻译文本
const TRANSLATIONS = {
  en: {
    // Common
    common: {
      save: 'Save',
      cancel: 'Cancel',
      delete: 'Delete',
      edit: 'Edit',
      add: 'Add',
      close: 'Close',
      confirm: 'Confirm',
      loading: 'Loading...',
      error: 'Error',
      success: 'Success',
      retry: 'Retry',
    },
    // AI Analysis
    ai: {
      analyzing: 'AI is analyzing',
      storageAnalysis: 'best storage conditions',
      analysisResult: 'AI Analysis Result',
      storageTime: 'Best storage time',
      storageMethod: 'Best storage method',
      dataSource: 'Data source',
      analysisError: 'Analysis failed, please try again later',
      processingError: 'Error occurred during analysis',
      storageTitle: 'Storage Analysis',
      recommendation: 'Adjust based on actual conditions and storage environment',
    },
    // Navigation
    navigation: {
      dashboard: 'Dashboard',
      ingredients: 'Ingredients',
      overview: 'Overview',
      statistics: 'Statistics',
      settings: 'Settings',
    },
    // Dashboard
    dashboard: {
      title: 'Ingredients',
      subtitle: 'Manage your food inventory',
      addIngredient: 'Add Ingredient',
      searchPlaceholder: 'Search ingredients...',
      noIngredients: 'No ingredients found',
      statusSummary: 'Status Summary',
      fresh: 'Fresh',
      nearExpiry: 'Near Expiry',
      expired: 'Expired',
      used: 'Used',
      total: 'Total',
      usedHint: 'Tap ✓ to restore',
    },
    // Overview
    overview: {
      title: 'Storage Overview',
      subtitle: 'Organize by location',
      fridge: 'Fridge',
      freezer: 'Freezer',
      storage: 'Storage',
      counter: 'Counter',
      noItems: 'No items in this location',
    },
    // Statistics
    statistics: {
      title: 'Statistics',
      subtitle: 'Track your food management',
      keyMetrics: 'Key Metrics',
      statusOverview: 'Status Overview',
      freshnessScore: 'Freshness Score',
      totalItems: 'Total Items',
      expiringSoon: 'Expiring Soon',
      recentlyUsed: 'Recently Used',
      storageDistribution: 'Storage Distribution',
      insights: 'Insights',
      performance: 'Performance',
      comingSoon: 'Coming Soon',
      timeframe: 'Timeframe',
      timeframeLabel: 'Time Period:',
      periodWeek: 'Week',
      periodMonth: 'Month',
      periodQuarter: 'Quarter',
      periodYear: 'Year',
      last7Days: 'Last 7 Days',
      last30Days: 'Last 30 Days',
      last90Days: 'Last 90 Days',
      inInventory: 'In inventory',
      overallQuality: 'Overall quality',
      readyToUse: 'Ready to use',
      useSoon: 'Use soon',
      needsDisposal: 'Needs disposal',
      consumed: 'Consumed',
      of: 'of',
      items: 'items',
      efficiencyScore: 'Efficiency Score',
      wasteRate: 'Waste Rate',
      inventoryTurnover: 'Inventory Turnover',
      actionRequired: 'Action Required',
      cleanupNeeded: 'Cleanup Needed',
      highWasteRate: 'High Waste Rate',
      excellentManagement: 'Excellent Management',
      youHave: 'You have',
      itemsExpiringSoon: 'items that will expire soon. Consider using them in your next meal!',
      itemsExpired: 'expired items. Time to clean out your pantry!',
      yourWasteRateIs: 'Your waste rate is',
      considerImproving: 'Consider buying smaller quantities or planning meals better.',
      planMeals: 'Plan meals with these ingredients',
      disposeExpired: 'Dispose of expired items',
      reviewHabits: 'Review shopping habits',
      maintainPractices: 'Maintain current practices',
      comingSoonTitle: 'Advanced Analytics',
      comingSoonChart: 'Interactive charts and graphs',
      comingSoonTrends: 'Historical trend analysis',
      comingSoonShopping: 'Smart shopping recommendations',
      comingSoonCost: 'Cost tracking and budgeting',
      comingSoonSustain: 'Sustainability metrics',
    },
    // Settings
    settings: {
      title: 'Settings',
      subtitle: 'Customize your experience',
      notifications: 'Notifications',
      enableNotifications: 'Enable Notifications',
      notificationsSubtitle: 'Receive push notifications',
      dailyReminders: 'Daily Reminders',
      dailyRemindersSubtitle: 'Morning summary of items to use',
      nearExpiryAlerts: 'Near Expiry Alerts',
      nearExpiryAlertsSubtitle: 'Get notified when items are about to expire',
      expiredAlerts: 'Expired Item Alerts',
      expiredAlertsSubtitle: 'Get notified when items have expired',
      preferences: 'Preferences',
      autoSuggestExpiry: 'Auto-suggest Expiry',
      autoSuggestExpirySubtitle: 'Automatically suggest expiration dates',
      defaultNearExpiryDays: 'Default Near Expiry Days',
      categories: 'Categories',
      categoriesSubtitle: 'Manage ingredient categories',
      units: 'Units',
      unitsSubtitle: 'Manage measurement units',
      locations: 'Locations',
      locationsSubtitle: 'Manage storage locations',
      language: 'Language',
      languageSubtitle: 'Select your preferred language',
      dataManagement: 'Data Management',
      exportData: 'Export Data',
      exportDataSubtitle: 'Download your ingredient data',
      importData: 'Import Data',
      importDataSubtitle: 'Import ingredients from CSV',
      clearAllData: 'Clear All Data',
      clearAllDataSubtitle: 'Remove all ingredients',
      account: 'Account',
      profile: 'Profile',
      profileSubtitle: 'Edit your profile information',
      privacyPolicy: 'Privacy Policy',
      privacyPolicySubtitle: 'Read our privacy policy',
      termsOfService: 'Terms of Service',
      termsOfServiceSubtitle: 'Read our terms of service',
      deleteAccount: 'Delete Account',
      deleteAccountSubtitle: 'Permanently delete your account',
      about: 'About',
      version: 'Version',
      support: 'Support',
      supportSubtitle: 'Get help and contact us',
      rateApp: 'Rate App',
      rateAppSubtitle: 'Rate us on the App Store',
      footerText: 'Made with ❤️ for reducing food waste',
    },
    // Privacy Policy
    privacy: {
      lastUpdated: 'Last updated',
      introduction: 'Introduction',
      introductionText: 'Welcome to this software ("we," "our," or "us"). This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our mobile application (the "App"). Please read this privacy policy carefully. If you do not agree with the terms of this privacy policy, please do not access the application.',
      informationWeCollect: 'Information We Collect',
      personalInformation: 'Personal Information',
      personalInfoText: '• Account Information: Email address, display name when you create an account\n• Profile Data: User preferences and settings\n• Authentication Data: Login credentials and authentication tokens',
      ingredientData: 'Ingredient Data',
      ingredientDataText: '• Food Items: Names, quantities, categories, and locations of ingredients\n• Expiration Dates: Purchase and expiration dates for food tracking\n• Images: Photos of ingredients (stored locally on your device)\n• Notes: Personal notes and comments about ingredients',
      usageData: 'Usage Data',
      usageDataText: '• App Usage: Features used, time spent in app, and interaction patterns\n• Device Information: Device type, operating system, and app version\n• Analytics Data: Anonymous usage statistics to improve app performance',
      howWeUse: 'How We Use Your Information',
      howWeUseText: 'We use the collected information for the following purposes:\n\n• To provide and maintain the App\'s core functionality\n• To manage your account and provide customer support\n• To send notifications about expiring ingredients\n• To improve app performance and user experience\n• To analyze usage patterns and develop new features\n• To ensure app security and prevent fraud',
      dataStorage: 'Data Storage and Security',
      localStorage: 'Local Storage',
      localStorageText: 'Most of your ingredient data is stored locally on your device using secure local storage mechanisms. This includes your ingredient lists, photos, and personal preferences.',
      cloudStorage: 'Cloud Storage',
      cloudStorageText: 'When you create an account, your data may be synchronized to secure cloud servers to enable backup and cross-device access. All cloud data is encrypted in transit and at rest.',
      securityMeasures: 'Security Measures',
      securityMeasuresText: 'We implement appropriate technical and organizational security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction.',
      dataSharing: 'Data Sharing and Disclosure',
      dataSharingText: 'We do not sell, trade, or otherwise transfer your personal information to third parties, except in the following circumstances:\n\n• With your explicit consent\n• To comply with legal obligations\n• To protect our rights and prevent fraud\n• With service providers who assist in app operations (under strict confidentiality agreements)\n• In case of business transfer or merger (with notice to users)',
      yourRights: 'Your Rights and Choices',
      yourRightsText: 'You have the following rights regarding your personal information:\n\n• Access: Request access to your personal data\n• Correction: Update or correct inaccurate information\n• Deletion: Request deletion of your personal data\n• Portability: Export your data in a machine-readable format\n• Opt-out: Disable notifications and data collection\n• Account Deletion: Permanently delete your account and all associated data',
      dataRetention: 'Data Retention',
      dataRetentionText: 'We retain your personal information only as long as necessary to provide our services and fulfill the purposes outlined in this privacy policy. When you delete your account, we will delete your personal data within 30 days, except where we are required to retain it for legal or regulatory purposes.',
      childrenPrivacy: 'Children\'s Privacy',
      childrenPrivacyText: 'Our App is not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and believe your child has provided us with personal information, please contact us immediately.',
      internationalTransfers: 'International Data Transfers',
      internationalTransfersText: 'Your information may be transferred to and processed in countries other than your own. We ensure that such transfers comply with applicable data protection laws and implement appropriate safeguards to protect your personal information.',
      policyChanges: 'Changes to This Privacy Policy',
      policyChangesText: 'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy in the App and updating the "Last updated" date. You are advised to review this Privacy Policy periodically for any changes.',
      contactInfo: 'Contact Information',
      contactInfoText: 'If you have any questions about this Privacy Policy or our data practices, please contact us at:\n\nEmail: privacy@fridgy.app\nAddress: [Your Company Address]\nPhone: [Your Contact Number]',
      footer: 'By using this software, you acknowledge that you have read and understood this Privacy Policy and agree to the collection, use, and disclosure of your information as described herein.',
    },
    // Terms of Service
    terms: {
      lastUpdated: 'Last updated',
      introduction: 'Introduction',
      introductionText: 'Welcome to this software. These Terms of Service ("Terms") govern your use of our mobile application (the "App") and the services provided through it. By accessing or using our App, you agree to be bound by these Terms. If you disagree with any part of these terms, then you may not access the App.',
      acceptance: 'Acceptance of Terms',
      acceptanceText: 'By accessing and using this App, you accept and agree to be bound by the terms and provision of this agreement. Additionally, when using this App\'s particular services, you shall be subject to any posted guidelines or rules applicable to such services.',
      description: 'Description of Service',
      descriptionText: 'This App provides a food inventory management system that helps users track ingredients, monitor expiration dates, and manage their food storage. The service includes features such as ingredient categorization, expiration tracking, and storage recommendations.',
      userAccounts: 'User Accounts',
      userAccountsText: 'When you create an account with us, you must provide information that is accurate, complete, and current at all times. You are responsible for safeguarding the password and for all activities that occur under your account.',
      acceptableUse: 'Acceptable Use',
      acceptableUseText: 'You agree not to use the App to:\n\n• Violate any laws or regulations\n• Infringe on the rights of others\n• Transmit harmful or malicious code\n• Attempt to gain unauthorized access to the App\n• Use the App for any unlawful or prohibited purpose',
      intellectualProperty: 'Intellectual Property',
      intellectualPropertyText: 'The App and its original content, features, and functionality are and will remain the exclusive property of the App developers and its licensors. The App is protected by copyright, trademark, and other laws.',
      privacy: 'Privacy',
      privacyText: 'Your privacy is important to us. Please review our Privacy Policy, which also governs your use of the App, to understand our practices.',
      termination: 'Termination',
      terminationText: 'We may terminate or suspend your account and bar access to the App immediately, without prior notice or liability, under our sole discretion, for any reason whatsoever and without limitation, including but not limited to a breach of the Terms.',
      disclaimers: 'Disclaimers',
      disclaimersText: 'The information on this App is provided on an "as is" basis. To the fullest extent permitted by law, this App excludes all representations, warranties, conditions and terms relating to our App and the use of this App.',
      limitations: 'Limitation of Liability',
      limitationsText: 'In no event shall the App developers, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses.',
      governingLaw: 'Governing Law',
      governingLawText: 'These Terms shall be interpreted and governed by the laws of the jurisdiction in which the App developers operate, without regard to its conflict of law provisions.',
      changes: 'Changes to Terms',
      changesText: 'We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will provide at least 30 days notice prior to any new terms taking effect.',
      contact: 'Contact Information',
      contactText: 'If you have any questions about these Terms of Service, please contact us at:\n\nEmail: support@fridgy.app\nAddress: [Your Company Address]\nPhone: [Your Contact Number]',
      footer: 'By using this software, you acknowledge that you have read and understood these Terms of Service and agree to be bound by them.',
    },
    // Support
    support: {
      title: 'Support',
      subtitle: 'Get help and contact us',
      faq: 'Frequently Asked Questions',
      faqQ1: 'How do I add ingredients?',
      faqA1: 'Tap the "+" button on the ingredients page, fill in the ingredient details, and save.',
      faqQ2: 'How do I track expiration dates?',
      faqA2: 'When adding ingredients, set the purchase date and expiry date. The app will automatically track and notify you.',
      faqQ3: 'Can I sync data across devices?',
      faqA3: 'Yes, create an account to enable cloud sync and access your data on multiple devices.',
      faqQ4: 'How do I organize ingredients by location?',
      faqA4: 'Use the location field when adding ingredients. You can view them organized by location in the Overview tab.',
      faqQ5: 'What if I forget to mark an ingredient as used?',
      faqA5: 'You can restore used ingredients by tapping the checkmark icon in the ingredients list.',
      contactUs: 'Contact Us',
      contactEmail: 'Email Support',
      contactEmailText: 'Send us an email for technical support or feature requests',
      contactEmailAddress: 'support@fridgy.app',
      reportBug: 'Report a Bug',
      reportBugText: 'Found a bug? Let us know so we can fix it',
      featureRequest: 'Feature Request',
      featureRequestText: 'Have an idea for a new feature? We\'d love to hear it',
      feedback: 'General Feedback',
      feedbackText: 'Share your thoughts and suggestions with us',
      responseTime: 'We typically respond within 24-48 hours',
      troubleshooting: 'Troubleshooting',
      troubleshootingText: 'Common issues and solutions',
      issue1: 'App crashes or freezes',
      solution1: 'Try restarting the app or your device. If the issue persists, contact support.',
      issue2: 'Data not syncing',
      solution2: 'Check your internet connection and ensure you\'re logged in to your account.',
      issue3: 'Notifications not working',
      solution3: 'Check your device notification settings and ensure notifications are enabled in the app.',
      issue4: 'Can\'t add ingredients',
      solution4: 'Make sure all required fields are filled and try again. If the problem continues, restart the app.',
      resources: 'Additional Resources',
      userGuide: 'User Guide',
      userGuideText: 'Learn how to use all features of the app',
      videoTutorials: 'Video Tutorials',
      videoTutorialsText: 'Watch step-by-step tutorials',
      community: 'Community',
      communityText: 'Join our user community for tips and discussions',
      thankYou: 'Thank you for using our app!',
      thankYouText: 'Your feedback helps us improve the experience for everyone.',
    },
    // Forms
    forms: {
      name: 'Name',
      namePlaceholder: 'Enter ingredient name',
      category: 'Category',
      categoryPlaceholder: 'Select category',
      quantity: 'Quantity',
      quantityPlaceholder: 'Enter quantity',
      unit: 'Unit',
      unitPlaceholder: 'Select unit',
      location: 'Location',
      locationPlaceholder: 'Select storage location',
      purchaseDate: 'Storage Date',
      expiryDate: 'Expiry Date',
      expiryDatePlaceholder: 'Select expiry date',
      notes: 'Notes',
      notesPlaceholder: 'Add notes (optional)',
    },
    // Categories
    categories: {
      dairy: 'Dairy',
      meat: 'Meat',
      vegetables: 'Vegetables',
      fruits: 'Fruits',
      grains: 'Grains',
      beverages: 'Beverages',
      snacks: 'Snacks',
      condiments: 'Condiments',
      frozen: 'Frozen',
      canned: 'Canned',
      other: 'Other',
    },
    // Units
    units: {
      pieces: 'pieces',
      grams: 'grams',
      kilograms: 'kilograms',
      ounces: 'ounces',
      pounds: 'pounds',
      liters: 'liters',
      milliliters: 'milliliters',
      cups: 'cups',
      tablespoons: 'tablespoons',
      teaspoons: 'teaspoons',
    },
    // Locations
    locations: {
      fridge: 'Fridge',
      freezer: 'Freezer',
      storage: 'Storage',
      counter: 'Counter',
    },
  },
  zh: {
    // Common
    common: {
      save: '保存',
      cancel: '取消',
      delete: '删除',
      edit: '编辑',
      add: '添加',
      close: '关闭',
      confirm: '确认',
      loading: '加载中...',
      error: '错误',
      success: '成功',
      retry: '重试',
    },
    // AI Analysis
    ai: {
      analyzing: 'AI 正在分析',
      storageAnalysis: '的最佳储藏条件',
      analysisResult: 'AI 分析结果',
      storageTime: '最佳储藏时间',
      storageMethod: '最佳储藏方式',
      dataSource: '数据来源',
      analysisError: '无法获取分析结果，请稍后重试',
      processingError: '分析过程中出现错误',
      storageTitle: '储藏分析',
      recommendation: '建议根据实际情况和储藏条件适当调整',
    },
    // Navigation
    navigation: {
      dashboard: '仪表板',
      ingredients: '食材',
      overview: '概览',
      statistics: '统计',
      settings: '设置',
    },
    // Dashboard
    dashboard: {
      title: '食材',
      subtitle: '管理您的食物库存',
      addIngredient: '添加食材',
      searchPlaceholder: '搜索食材...',
      noIngredients: '未找到食材',
      statusSummary: '状态摘要',
      fresh: '新鲜',
      nearExpiry: '即将过期',
      expired: '已过期',
      used: '已使用',
      total: '总计',
      usedHint: '点击 ✓ 恢复',
    },
    // Overview
    overview: {
      title: '存储概览',
      subtitle: '按位置整理',
      fridge: '冰箱',
      freezer: '冷冻室',
      storage: '储物柜',
      counter: '台面',
      noItems: '此位置暂无物品',
    },
    // Statistics
    statistics: {
      title: '统计',
      subtitle: '跟踪您的食物管理',
      keyMetrics: '关键指标',
      statusOverview: '状态概览',
      freshnessScore: '新鲜度评分',
      totalItems: '总物品数',
      expiringSoon: '即将过期',
      recentlyUsed: '最近使用',
      storageDistribution: '存储分布',
      insights: '洞察',
      performance: '表现',
      comingSoon: '即将推出',
      timeframe: '时间范围',
      timeframeLabel: '时间段：',
      periodWeek: '周',
      periodMonth: '月',
      periodQuarter: '季度',
      periodYear: '年',
      last7Days: '最近7天',
      last30Days: '最近30天',
      last90Days: '最近90天',
      inInventory: '库存中',
      overallQuality: '整体质量',
      readyToUse: '可立即使用',
      useSoon: '尽快使用',
      needsDisposal: '需要处理',
      consumed: '已消耗',
      of: '共',
      items: '项',
      efficiencyScore: '效率得分',
      wasteRate: '浪费率',
      inventoryTurnover: '库存周转',
      actionRequired: '需要采取行动',
      cleanupNeeded: '需要清理',
      highWasteRate: '高浪费率',
      excellentManagement: '管理优秀',
      youHave: '你有',
      itemsExpiringSoon: '项物品即将过期，建议优先使用。',
      itemsExpired: '项物品已过期，请及时清理。',
      yourWasteRateIs: '你的浪费率为',
      considerImproving: '建议减少采购量或优化用餐计划。',
      planMeals: '用这些食材规划餐食',
      disposeExpired: '处理过期物品',
      reviewHabits: '检查购物习惯',
      maintainPractices: '保持当前做法',
      comingSoonTitle: '高级分析',
      comingSoonChart: '交互式图表',
      comingSoonTrends: '历史趋势分析',
      comingSoonShopping: '智能购物建议',
      comingSoonCost: '成本跟踪与预算',
      comingSoonSustain: '可持续性指标',
    },
    // Settings
    settings: {
      title: '设置',
      subtitle: '自定义您的体验',
      notifications: '通知',
      enableNotifications: '启用通知',
      notificationsSubtitle: '接收推送通知',
      dailyReminders: '每日提醒',
      dailyRemindersSubtitle: '早晨使用物品摘要',
      nearExpiryAlerts: '即将过期提醒',
      nearExpiryAlertsSubtitle: '物品即将过期时通知',
      expiredAlerts: '过期物品提醒',
      expiredAlertsSubtitle: '物品过期时通知',
      preferences: '偏好设置',
      autoSuggestExpiry: '自动建议过期日期',
      autoSuggestExpirySubtitle: '自动建议过期日期',
      defaultNearExpiryDays: '默认即将过期天数',
      categories: '分类',
      categoriesSubtitle: '管理食材分类',
      units: '单位',
      unitsSubtitle: '管理计量单位',
      locations: '位置',
      locationsSubtitle: '管理存储位置',
      language: '语言',
      languageSubtitle: '选择您偏好的语言',
      dataManagement: '数据管理',
      exportData: '导出数据',
      exportDataSubtitle: '下载您的食材数据',
      importData: '导入数据',
      importDataSubtitle: '从CSV导入食材',
      clearAllData: '清除所有数据',
      clearAllDataSubtitle: '删除所有食材',
      account: '账户',
      profile: '个人资料',
      profileSubtitle: '编辑您的个人资料信息',
      privacyPolicy: '隐私政策',
      privacyPolicySubtitle: '阅读我们的隐私政策',
      termsOfService: '服务条款',
      termsOfServiceSubtitle: '阅读我们的服务条款',
      deleteAccount: '删除账户',
      deleteAccountSubtitle: '永久删除您的账户',
      about: '关于',
      version: '版本',
      support: '支持',
      supportSubtitle: '获取帮助并联系我们',
      rateApp: '评价应用',
      rateAppSubtitle: '在应用商店评价我们',
      footerText: '为减少食物浪费而制作 ❤️',
    },
    // Privacy Policy
    privacy: {
      lastUpdated: '最后更新',
      introduction: '介绍',
      introductionText: '欢迎使用本软件（"我们"、"我们的"或"我们"）。本隐私政策解释了我们在您使用本移动应用程序（"应用"）时如何收集、使用、披露和保护您的信息。请仔细阅读本隐私政策。如果您不同意本隐私政策的条款，请不要访问该应用程序。',
      informationWeCollect: '我们收集的信息',
      personalInformation: '个人信息',
      personalInfoText: '• 账户信息：创建账户时的电子邮件地址、显示名称\n• 个人资料数据：用户偏好和设置\n• 身份验证数据：登录凭据和身份验证令牌',
      ingredientData: '食材数据',
      ingredientDataText: '• 食物项目：食材的名称、数量、类别和位置\n• 过期日期：食物跟踪的购买和过期日期\n• 图像：食材的照片（存储在您的设备本地）\n• 备注：关于食材的个人备注和评论',
      usageData: '使用数据',
      usageDataText: '• 应用使用：使用的功能、在应用中的时间以及交互模式\n• 设备信息：设备类型、操作系统和应用版本\n• 分析数据：用于改善应用性能的匿名使用统计',
      howWeUse: '我们如何使用您的信息',
      howWeUseText: '我们将收集的信息用于以下目的：\n\n• 提供和维护应用的核心功能\n• 管理您的账户并提供客户支持\n• 发送关于即将过期食材的通知\n• 改善应用性能和用户体验\n• 分析使用模式并开发新功能\n• 确保应用安全并防止欺诈',
      dataStorage: '数据存储和安全',
      localStorage: '本地存储',
      localStorageText: '您的食材数据大部分存储在您设备上的安全本地存储机制中。这包括您的食材列表、照片和个人偏好。',
      cloudStorage: '云存储',
      cloudStorageText: '当您创建账户时，您的数据可能会同步到安全的云服务器，以启用备份和跨设备访问。所有云数据在传输和存储时都经过加密。',
      securityMeasures: '安全措施',
      securityMeasuresText: '我们实施适当的技术和组织安全措施，以保护您的个人信息免受未经授权的访问、更改、披露或破坏。',
      dataSharing: '数据共享和披露',
      dataSharingText: '我们不会向第三方出售、交易或以其他方式转让您的个人信息，除非在以下情况下：\n\n• 获得您的明确同意\n• 遵守法律义务\n• 保护我们的权利并防止欺诈\n• 与协助应用运营的服务提供商（在严格的保密协议下）\n• 在业务转让或合并的情况下（通知用户）',
      yourRights: '您的权利和选择',
      yourRightsText: '您对您的个人信息拥有以下权利：\n\n• 访问：请求访问您的个人数据\n• 更正：更新或更正不准确的信息\n• 删除：请求删除您的个人数据\n• 可携带性：以机器可读格式导出您的数据\n• 选择退出：禁用通知和数据收集\n• 账户删除：永久删除您的账户和所有相关数据',
      dataRetention: '数据保留',
      dataRetentionText: '我们仅在提供我们的服务和实现本隐私政策中概述的目的所必需的时间内保留您的个人信息。当您删除账户时，我们将在30天内删除您的个人数据，除非法律或监管要求我们保留这些数据。',
      childrenPrivacy: '儿童隐私',
      childrenPrivacyText: '我们的应用不适用于13岁以下的儿童。我们不会故意收集13岁以下儿童的个人信息。如果您是父母或监护人，并认为您的孩子向我们提供了个人信息，请立即与我们联系。',
      internationalTransfers: '国际数据传输',
      internationalTransfersText: '您的信息可能会被传输到您所在国家以外的国家并在那里处理。我们确保此类传输符合适用的数据保护法律，并实施适当的保护措施来保护您的个人信息。',
      policyChanges: '本隐私政策的变更',
      policyChangesText: '我们可能会不时更新本隐私政策。我们将通过在应用中发布新的隐私政策并更新"最后更新"日期来通知您任何变更。建议您定期查看本隐私政策以了解任何变更。',
      contactInfo: '联系信息',
      contactInfoText: '如果您对本隐私政策或我们的数据实践有任何疑问，请通过以下方式联系我们：\n\n电子邮件：privacy@fridgy.app\n地址：[您的公司地址]\n电话：[您的联系电话]',
      footer: '通过使用本软件，您确认已阅读并理解本隐私政策，并同意按照此处描述的方式收集、使用和披露您的信息。',
    },
    // Terms of Service
    terms: {
      lastUpdated: '最后更新',
      introduction: '介绍',
      introductionText: '欢迎使用本软件。本服务条款（"条款"）规定了您使用我们的移动应用程序（"应用"）以及通过其提供的服务的规则。通过访问或使用我们的应用，您同意受这些条款的约束。如果您不同意这些条款的任何部分，则不得访问该应用。',
      acceptance: '条款接受',
      acceptanceText: '通过访问和使用本应用，您接受并同意受本协议条款和规定的约束。此外，在使用本应用的特定服务时，您应遵守适用于此类服务的任何已发布的指导原则或规则。',
      description: '服务描述',
      descriptionText: '本应用提供食物库存管理系统，帮助用户跟踪食材、监控过期日期并管理食物存储。服务包括食材分类、过期跟踪和存储建议等功能。',
      userAccounts: '用户账户',
      userAccountsText: '当您在我们这里创建账户时，您必须提供准确、完整和最新的信息。您有责任保护密码并负责在您账户下发生的所有活动。',
      acceptableUse: '可接受使用',
      acceptableUseText: '您同意不使用本应用来：\n\n• 违反任何法律法规\n• 侵犯他人权利\n• 传输有害或恶意代码\n• 试图未经授权访问本应用\n• 将本应用用于任何非法或禁止的目的',
      intellectualProperty: '知识产权',
      intellectualPropertyText: '本应用及其原创内容、功能和特性是并将继续是应用开发者及其许可方的专有财产。本应用受版权、商标和其他法律保护。',
      privacy: '隐私',
      privacyText: '您的隐私对我们很重要。请查看我们的隐私政策，该政策也规定了您对本应用的使用，以了解我们的做法。',
      termination: '终止',
      terminationText: '我们可能会立即终止或暂停您的账户并禁止访问本应用，无需事先通知或承担责任，在我们唯一酌处权下，出于任何原因且无限制，包括但不限于违反条款。',
      disclaimers: '免责声明',
      disclaimersText: '本应用上的信息按"现状"提供。在法律允许的最大范围内，本应用排除所有与我们应用和使用本应用相关的陈述、保证、条件和条款。',
      limitations: '责任限制',
      limitationsText: '在任何情况下，应用开发者及其董事、员工、合作伙伴、代理、供应商或关联公司均不对任何间接、偶然、特殊、后果性或惩罚性损害承担责任，包括但不限于利润、数据、使用、商誉或其他无形损失的损失。',
      governingLaw: '适用法律',
      governingLawText: '这些条款应根据应用开发者运营所在司法管辖区的法律进行解释和管辖，不考虑其法律冲突条款。',
      changes: '条款变更',
      changesText: '我们保留随时修改或替换这些条款的权利，由我们唯一酌处权决定。如果修订是重要的，我们将在任何新条款生效前至少提供30天的通知。',
      contact: '联系信息',
      contactText: '如果您对这些服务条款有任何疑问，请通过以下方式联系我们：\n\n电子邮件：support@fridgy.app\n地址：[您的公司地址]\n电话：[您的联系电话]',
      footer: '通过使用本软件，您确认已阅读并理解这些服务条款并同意受其约束。',
    },
    // Support
    support: {
      title: '支持',
      subtitle: '获取帮助并联系我们',
      faq: '常见问题',
      faqQ1: '如何添加食材？',
      faqA1: '在食材页面点击"+"按钮，填写食材详情，然后保存。',
      faqQ2: '如何跟踪过期日期？',
      faqA2: '添加食材时，设置购买日期和过期日期。应用会自动跟踪并通知您。',
      faqQ3: '可以在多个设备间同步数据吗？',
      faqA3: '可以，创建账户即可启用云同步，在多个设备上访问您的数据。',
      faqQ4: '如何按位置整理食材？',
      faqA4: '添加食材时使用位置字段。您可以在概览标签页中按位置查看它们。',
      faqQ5: '如果忘记标记食材为已使用怎么办？',
      faqA5: '您可以通过点击食材列表中的勾选图标来恢复已使用的食材。',
      contactUs: '联系我们',
      contactEmail: '邮件支持',
      contactEmailText: '发送邮件获取技术支持或功能请求',
      contactEmailAddress: 'support@fridgy.app',
      reportBug: '报告错误',
      reportBugText: '发现错误？请告诉我们，我们会修复它',
      featureRequest: '功能请求',
      featureRequestText: '有新功能的想法？我们很乐意听取',
      feedback: '一般反馈',
      feedbackText: '与我们分享您的想法和建议',
      responseTime: '我们通常在24-48小时内回复',
      troubleshooting: '故障排除',
      troubleshootingText: '常见问题和解决方案',
      issue1: '应用崩溃或卡死',
      solution1: '尝试重启应用或设备。如果问题持续存在，请联系支持。',
      issue2: '数据不同步',
      solution2: '检查您的网络连接，确保您已登录账户。',
      issue3: '通知不工作',
      solution3: '检查您的设备通知设置，确保在应用中启用了通知。',
      issue4: '无法添加食材',
      solution4: '确保所有必填字段都已填写，然后重试。如果问题继续，请重启应用。',
      resources: '其他资源',
      userGuide: '用户指南',
      userGuideText: '学习如何使用应用的所有功能',
      videoTutorials: '视频教程',
      videoTutorialsText: '观看分步教程',
      community: '社区',
      communityText: '加入我们的用户社区，获取技巧和讨论',
      thankYou: '感谢您使用我们的应用！',
      thankYouText: '您的反馈帮助我们改善每个人的体验。',
    },
    // Forms
    forms: {
      name: '名称',
      namePlaceholder: '输入食材名称',
      category: '分类',
      categoryPlaceholder: '选择分类',
      quantity: '数量',
      quantityPlaceholder: '输入数量',
      unit: '单位',
      unitPlaceholder: '选择单位',
      location: '位置',
      locationPlaceholder: '选择存储位置',
      purchaseDate: '存放日期',
      expiryDate: '过期日期',
      expiryDatePlaceholder: '选择过期日期',
      notes: '备注',
      notesPlaceholder: '添加备注（可选）',
    },
    // Categories
    categories: {
      dairy: '乳制品',
      meat: '肉类',
      vegetables: '蔬菜',
      fruits: '水果',
      grains: '谷物',
      beverages: '饮料',
      snacks: '零食',
      condiments: '调味品',
      frozen: '冷冻',
      canned: '罐装',
      other: '其他',
    },
    // Units
    units: {
      pieces: '个',
      grams: '克',
      kilograms: '千克',
      ounces: '盎司',
      pounds: '磅',
      liters: '升',
      milliliters: '毫升',
      cups: '杯',
      tablespoons: '汤匙',
      teaspoons: '茶匙',
    },
    // Locations
    locations: {
      fridge: '冰箱',
      freezer: '冷冻室',
      storage: '储物柜',
      counter: '台面',
    },
  },
  es: {
    // Common
    common: {
      save: 'Guardar',
      cancel: 'Cancelar',
      delete: 'Eliminar',
      edit: 'Editar',
      add: 'Agregar',
      close: 'Cerrar',
      confirm: 'Confirmar',
      loading: 'Cargando...',
      error: 'Error',
      success: 'Éxito',
    },
    // Navigation
    navigation: {
      dashboard: 'Panel',
      ingredients: 'Ingredientes',
      overview: 'Vista General',
      statistics: 'Estadísticas',
      settings: 'Configuración',
    },
    // Dashboard
    dashboard: {
      title: 'Ingredientes',
      subtitle: 'Gestiona tu inventario de alimentos',
      addIngredient: 'Agregar Ingrediente',
      searchPlaceholder: 'Buscar ingredientes...',
      noIngredients: 'No se encontraron ingredientes',
      statusSummary: 'Resumen de Estado',
      fresh: 'Fresco',
      nearExpiry: 'Por Vencer',
      expired: 'Vencido',
      used: 'Usado',
      total: 'Total',
      usedHint: 'Toca ✓ para restaurar',
    },
    // Settings
    settings: {
      title: 'Configuración',
      subtitle: 'Personaliza tu experiencia',
      language: 'Idioma',
      languageSubtitle: 'Selecciona tu idioma preferido',
      footerText: 'Hecho con ❤️ para reducir el desperdicio de alimentos',
    },
  },
  fr: {
    // Common
    common: {
      save: 'Sauvegarder',
      cancel: 'Annuler',
      delete: 'Supprimer',
      edit: 'Modifier',
      add: 'Ajouter',
      close: 'Fermer',
      confirm: 'Confirmer',
      loading: 'Chargement...',
      error: 'Erreur',
      success: 'Succès',
    },
    // Navigation
    navigation: {
      dashboard: 'Tableau de bord',
      ingredients: 'Ingrédients',
      overview: "Vue d'ensemble",
      statistics: 'Statistiques',
      settings: 'Paramètres',
    },
    // Settings
    settings: {
      title: 'Paramètres',
      subtitle: 'Personnalisez votre expérience',
      language: 'Langue',
      languageSubtitle: 'Sélectionnez votre langue préférée',
      footerText: 'Fait avec ❤️ pour réduire le gaspillage alimentaire',
    },
  },
  de: {
    // Common
    common: {
      save: 'Speichern',
      cancel: 'Abbrechen',
      delete: 'Löschen',
      edit: 'Bearbeiten',
      add: 'Hinzufügen',
      close: 'Schließen',
      confirm: 'Bestätigen',
      loading: 'Laden...',
      error: 'Fehler',
      success: 'Erfolg',
    },
    // Navigation
    navigation: {
      dashboard: 'Dashboard',
      ingredients: 'Zutaten',
      overview: 'Übersicht',
      statistics: 'Statistiken',
      settings: 'Einstellungen',
    },
    // Settings
    settings: {
      title: 'Einstellungen',
      subtitle: 'Passen Sie Ihre Erfahrung an',
      language: 'Sprache',
      languageSubtitle: 'Wählen Sie Ihre bevorzugte Sprache',
      footerText: 'Gemacht mit ❤️ um Lebensmittelverschwendung zu reduzieren',
    },
  },
  ja: {
    // Common
    common: {
      save: '保存',
      cancel: 'キャンセル',
      delete: '削除',
      edit: '編集',
      add: '追加',
      close: '閉じる',
      confirm: '確認',
      loading: '読み込み中...',
      error: 'エラー',
      success: '成功',
    },
    // Navigation
    navigation: {
      dashboard: 'ダッシュボード',
      ingredients: '食材',
      overview: '概要',
      statistics: '統計',
      settings: '設定',
    },
    // Settings
    settings: {
      title: '設定',
      subtitle: '体験をカスタマイズ',
      language: '言語',
      languageSubtitle: 'お好みの言語を選択',
      footerText: '食品廃棄物削減のため❤️で作成',
    },
  },
  ko: {
    // Common
    common: {
      save: '저장',
      cancel: '취소',
      delete: '삭제',
      edit: '편집',
      add: '추가',
      close: '닫기',
      confirm: '확인',
      loading: '로딩 중...',
      error: '오류',
      success: '성공',
    },
    // Navigation
    navigation: {
      dashboard: '대시보드',
      ingredients: '식재료',
      overview: '개요',
      scan: '스캔',
      statistics: '통계',
      settings: '설정',
    },
    // Settings
    settings: {
      title: '설정',
      subtitle: '경험을 맞춤 설정',
      language: '언어',
      languageSubtitle: '선호하는 언어를 선택하세요',
      footerText: '식품 낭비 감소를 위해❤️로 제작',
    },
  },
};

// 国际化状态管理
interface I18nState {
  currentLanguage: LanguageCode;
  setLanguage: (language: LanguageCode) => void;
  t: (key: string) => string;
}

export const useI18n = create<I18nState>()(
  persist(
    (set, get) => ({
      currentLanguage: 'en',
      
      setLanguage: (language: LanguageCode) => {
        console.log('Setting language to:', language);
        set({ currentLanguage: language });
      },
      
      t: (key: string) => {
        const { currentLanguage } = get();
        const keys = key.split('.');
        let value: any = TRANSLATIONS[currentLanguage];
        
        for (const k of keys) {
          if (value && typeof value === 'object' && k in value) {
            value = value[k];
          } else {
            // 如果当前语言没有翻译，回退到英语
            value = TRANSLATIONS.en;
            for (const fallbackKey of keys) {
              if (value && typeof value === 'object' && fallbackKey in value) {
                value = value[fallbackKey];
              } else {
                return key; // 如果连英语都没有，返回原始key
              }
            }
            break;
          }
        }
        
        return typeof value === 'string' ? value : key;
      },
    }),
    {
      name: 'fridgy-i18n',
      storage: createJSONStorage(() => AsyncStorage),
      partialize: (state) => ({ currentLanguage: state.currentLanguage }),
    }
  )
);

// 导出翻译函数
export const t = (key: string) => useI18n.getState().t(key);

// 导出当前语言
export const getCurrentLanguage = () => useI18n.getState().currentLanguage;

// 导出设置语言函数
export const setLanguage = (language: LanguageCode) => useI18n.getState().setLanguage(language);
