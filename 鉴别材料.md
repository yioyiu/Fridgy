## 文档编写

本文件为"软件著作权登记—文档鉴别材料"。内容依据《大纲.md》整理，围绕 Fridgy（智能食材管理）移动应用，从运行环境、技术方案、数据模型与功能点等方面对软件进行可识别性描述。

**版本说明**：
- 本文档基于 Fridgy v1.1.0 版本编写
- 相比 v1.0.0 版本（已申请软著），v1.1.0 版本新增了7个主要功能模块
- 代码行数从约 12,349 行增加到约 18,737 行，增长约 51.7%
- 建议作为软件版本升级登记申请

## 目录
- 软件简介
  - 开发背景
  - 软件介绍
  - 面向用户
  - 主要功能
  - 优势创新
- 运行环境
  - 硬件要求
  - 软件要求
- 软件技术
  - 技术栈
  - 架构设计
  - 数据模型
- 软件功能
  - 分点叙述

## 软件简介

### 开发背景
在当今快节奏的生活中，食材管理已成为家庭和小型餐饮面临的重要挑战。据统计，全球每年约有13亿吨食物被浪费，其中家庭浪费占很大比例。主要问题包括：

1. **遗忘问题**：忙碌的生活节奏导致用户经常忘记冰箱中存放的食材，特别是那些被放在角落或包装不明显的物品。

2. **保质期管理困难**：不同食材的保质期差异很大，用户难以准确记忆每种食材的最佳食用时间，经常出现临期或过期食材。

3. **采购重复**：由于不清楚现有库存，用户经常重复购买已有食材，造成浪费和额外支出。

4. **烹饪灵感缺乏**：面对冰箱中的食材，用户往往缺乏创意，不知道如何搭配制作美味健康的餐食。

5. **存储方式不当**：缺乏科学的食材存储知识，导致食材提前变质。

Fridgy 正是为解决这些痛点而开发的智能食材管理应用。它通过移动端的便捷记录、智能提醒和AI建议，帮助用户建立科学的食材管理体系，显著降低浪费，提升厨房管理效率，让食材管理变得简单而有趣。

### 软件介绍
Fridgy 是一款基于 React Native + Expo 技术栈开发的跨平台智能食材管理移动应用，支持 Android 与 iOS 双平台运行。作为一款专注于食材全生命周期管理的应用，Fridgy 集成了现代移动开发的最佳实践和人工智能技术。

**核心功能架构**：
- **智能录入系统**：支持多种录入方式，包括手动输入、扫码识别、拍照识别、语音识别（v1.1.0新增）等，用户可根据不同场景选择最便捷的方式记录食材信息。

- **智能状态管理**：系统基于食材的保质期信息，结合当前时间自动计算并更新食材状态（新鲜、临期、过期），为用户提供直观的视觉反馈。

- **个性化提醒机制**：根据用户设定的提醒策略，在关键时间节点（如临期前1-3天、到期日等）推送本地通知，确保用户及时处理食材。支持季节性通知（v1.1.0新增），定时推送当季水果推荐。

- **AI智能建议引擎**：集成多种AI模型（如DeepSeek、Zhipu等），基于用户现有食材库存，智能生成烹饪建议、营养搭配方案和保鲜技巧。v1.1.0新增当季水果智能推荐功能，结合季节特点提供应季食材建议。

- **数据可视化分析**：通过图表和统计信息，帮助用户了解食材使用模式、浪费情况，为优化采购和存储提供数据支持。

- **语音识别系统**（v1.1.0新增）：支持语音输入快速添加食材，支持多语言识别，提供实时转录和智能解析功能。

- **数据管理增强**（v1.1.0新增）：提供全面的数据清理功能，支持选择性清理、安全确认机制和进度可视化。

- **版本管理**（v1.1.0新增）：自动检测版本更新，支持强制更新模式，提供应用商店跳转功能。

- **交互优化**（v1.1.0新增）：新增滑动删除功能，提供更直观的删除交互方式，支持手势识别和视觉反馈。

**技术特色**：
- 采用现代化的跨平台开发框架，确保在不同设备上的一致体验
- 支持离线使用，核心功能无需网络连接
- 数据本地存储，保护用户隐私
- 模块化架构设计，便于功能扩展和维护

### 面向用户
Fridgy 的目标用户群体广泛，主要服务于以下几类用户：

**1. 家庭用户群体**
- **年轻家庭**：注重生活品质，希望通过科学管理提升家庭饮食健康水平
- **有孩子的家庭**：需要管理多样化的食材，确保孩子营养均衡
- **老年用户**：记忆力下降，需要智能提醒帮助管理食材保质期
- **独居用户**：采购量小但种类多，需要精准管理避免浪费

**2. 健康饮食倡导者**
- **健身人群**：需要精确控制食材摄入，管理蛋白质、碳水化合物等营养成分
- **素食主义者**：需要管理多种植物性食材，确保营养搭配合理
- **特殊饮食需求者**：如糖尿病患者、过敏体质等，需要严格管理食材选择

**3. 小型餐饮经营者**
- **家庭式餐厅**：需要管理食材库存，控制成本，减少浪费
- **员工餐厅**：需要批量管理食材，确保食品安全和营养均衡
- **咖啡厅/轻食店**：需要管理易腐食材，保持食材新鲜度
- **外卖商家**：需要根据订单情况合理采购和存储食材

**4. 教育机构**
- **学校食堂**：需要科学管理学生餐食食材，确保食品安全
- **幼儿园**：需要精细管理儿童餐食，注重营养搭配

**5. 其他用户群体**
- **食材批发商**：需要管理库存，跟踪食材流转情况
- **食品研究人员**：需要记录和分析食材数据
- **环保意识用户**：希望通过减少食物浪费来保护环境

### 主要功能
Fridgy 提供全面的食材管理功能，涵盖从录入到使用的完整流程：

**1. 智能食材管理**
- **基础信息管理**：支持食材名称、品类分类、存放位置（冷藏/冷冻/常温）、计量单位、数量、有效期等完整信息录入
- **图片管理**：支持拍照或从相册选择食材图片，便于视觉识别和记录
- **批量操作**：支持批量编辑、删除、移动食材，提高管理效率
- **搜索与筛选**：提供多维度搜索功能，可按名称、品类、状态、位置等条件快速定位食材

**2. 多样化录入方式**
- **手动录入**：提供直观的表单界面，支持快速输入食材信息
- **模板快速添加**：预设常用食材模板，一键添加减少重复输入

**3. 智能状态监控与提醒**
- **自动状态计算**：基于当前时间与保质期，自动计算食材状态（新鲜/临期/过期）
- **多级提醒策略**：支持设置多个提醒时间点（如临期前3天、1天、到期日等）
- **本地通知推送**：即使应用未运行也能及时收到提醒通知
- **自定义提醒内容**：用户可自定义提醒消息内容，增加个性化体验

**4. 数据可视化与分析**
- **概览仪表板**：直观显示食材总数、临期数量、过期数量等关键指标
- **品类分布图**：以饼图、柱状图等形式展示不同品类食材的分布情况
- **时间趋势分析**：分析食材使用模式，识别浪费高峰期
- **成本统计**：记录食材采购成本，分析支出结构
- **营养分析**：基于食材信息分析营养摄入情况

**5. AI智能建议系统**
- **烹饪建议**：基于现有食材智能推荐菜谱，提供详细的制作步骤
- **营养搭配**：根据营养学原理，推荐合理的食材搭配方案
- **保鲜技巧**：提供针对不同食材的科学保鲜方法和存储建议
- **采购建议**：分析使用模式，智能推荐需要补充的食材
- **季节性建议**：结合时令特点，推荐应季食材和菜谱

**6. 个性化设置中心**
- **字典管理**：自定义食材品类、计量单位、存放位置等字典内容
- **提醒策略配置**：灵活设置不同食材的提醒时间和方式
- **界面主题**：支持浅色/深色主题切换，适应不同使用环境
- **多语言支持**：支持中文、英文等多种语言界面
- **数据备份与同步**：支持数据导出、导入和云端同步功能

### 优势创新
Fridgy 在食材管理领域具有多项技术创新和用户体验优势：

**1. 场景化设计理念**
- **冰箱场景优化**：专门针对家庭冰箱和储物柜的使用场景设计，考虑实际使用中的空间限制和操作习惯
- **轻量化数据模型**：采用精简而高效的数据结构，减少存储空间占用，提高应用响应速度
- **高频操作优化**：针对用户频繁的查看、编辑、搜索操作进行界面和交互优化，提升使用效率
- **零学习成本**：采用直观的界面设计和符合用户习惯的操作流程，新用户无需学习即可上手使用

**2. 智能提醒系统**
- **多维度提醒策略**：支持基于时间、状态、用户行为等多维度的智能提醒
- **个性化提醒设置**：用户可根据个人习惯和食材特性自定义提醒时间和方式
- **渐进式提醒**：采用渐进式提醒策略，从温和提醒到紧急提醒，避免用户产生抵触情绪
- **智能学习**：系统会学习用户的使用习惯，自动调整提醒策略，提高提醒的精准度

**3. 可扩展AI架构**
- **多模型支持**：支持集成多种AI模型（DeepSeek、Zhipu、GPT等），用户可根据需求选择最适合的模型
- **统一接口设计**：采用统一的API接口和提示词模板，确保不同AI模型的一致体验
- **离线AI能力**：支持本地AI模型，在无网络环境下也能提供基础智能建议
- **模型热切换**：支持运行时切换AI模型，无需重启应用即可体验不同AI能力

**4. 数据安全与隐私保护**
- **本地优先存储**：核心数据优先存储在本地，减少隐私泄露风险
- **加密存储**：敏感信息采用加密存储，确保数据安全
- **最小权限原则**：只请求必要的系统权限，避免过度授权
- **数据控制权**：用户完全控制自己的数据，支持导出、删除等操作


## 运行环境

### 硬件要求
Fridgy 对硬件要求相对较低，能够适配大多数主流移动设备：

**1. 设备兼容性**
- **Android设备**：支持Android 8.0（API 26）及以上版本的智能手机和平板电脑
  - 推荐配置：4GB RAM，64GB存储空间
  - 最低配置：2GB RAM，32GB存储空间
  - 屏幕分辨率：支持720p及以上分辨率，推荐1080p或更高
- **iOS设备**：支持iOS 13.0及以上版本的iPhone和iPad
  - iPhone：支持iPhone 6s及以上机型
  - iPad：支持iPad Air 2及以上机型
  - 推荐配置：3GB RAM，64GB存储空间

**2. 存储空间要求**
- **应用安装**：约50-80MB（包含核心功能模块）
- **用户数据**：根据使用情况动态增长
  - 基础使用：约10-50MB（纯文本数据）
  - 图片存储：每张图片约1-5MB，建议预留200-500MB
  - 缓存数据：约20-100MB（AI模型缓存、临时文件等）
- **总建议空间**：至少预留500MB可用存储空间

**3. 网络连接要求**
- **基础功能**：支持离线使用，无需网络连接
- **AI功能**：需要稳定的网络连接（Wi-Fi或4G/5G）
  - 上传速度：建议≥1Mbps
  - 下载速度：建议≥2Mbps
- **数据同步**：需要网络连接进行云端备份和同步
- **应用更新**：需要网络连接下载应用更新


### 软件要求
Fridgy 的软件环境要求包括操作系统、权限配置和开发工具等方面：

**1. 操作系统要求**
- **Android平台**：
  - 最低版本：Android 8.0（API Level 26）
  - 推荐版本：Android 10.0（API Level 29）及以上
  - 支持架构：ARM64-v8a、ARMv7、x86_64
  - 特殊要求：需要支持Google Play Services（用于推送通知）
- **iOS平台**：
  - 最低版本：iOS 13.0
  - 推荐版本：iOS 15.0及以上
  - 支持架构：ARM64
  - 特殊要求：需要支持ARKit（用于增强现实功能，可选）

**2. 系统权限要求**
- **必需权限**：
  - 存储权限：用于保存图片和导出数据
  - 通知权限：用于推送临期提醒和系统通知
- **可选权限**：
  - 网络权限：用于AI功能和数据同步
- **权限处理策略**：
  - 采用渐进式权限请求，避免一次性请求过多权限
  - 提供权限说明和引导，帮助用户理解权限用途
  - 支持权限降级，在权限被拒绝时提供替代方案

**3. 依赖库和框架**
- **React Native**：0.79.5版本，提供跨平台开发能力
- **Expo SDK**：53.0版本，提供丰富的原生功能封装
- **JavaScript引擎**：
  - Android：Hermes引擎（推荐）或V8引擎
  - iOS：JavaScriptCore引擎
- **原生模块**：
  - 相机模块：expo-camera
  - 通知模块：expo-notifications
  - 文件系统：expo-file-system
  - 安全存储：expo-secure-store

**4. 开发环境要求（仅开发阶段）**
- **Node.js**：18.0及以上版本
- **包管理器**：npm 9.0+、yarn 1.22+或pnpm 8.0+
- **开发工具**：
  - Expo CLI：最新版本
  - React Native CLI：最新版本
  - TypeScript：5.8.3版本
- **平台特定工具**：
  - Android开发：Android Studio、Android SDK（API 26+）
  - iOS开发：Xcode 14.0+、iOS SDK 13.0+
- **代码编辑器**：推荐VS Code，支持React Native和TypeScript插件

**5. 第三方服务要求**
- **AI服务**：
  - DeepSeek API：用于智能建议功能
  - Zhipu AI API：备选AI服务提供商
  - OpenAI API：可选AI服务提供商
- **推送服务**：
  - Firebase Cloud Messaging（Android）
  - Apple Push Notification Service（iOS）
- **数据同步服务**：
  - 可选：Supabase、Firebase或其他云服务
  - 支持：本地存储优先，云端同步可选

**6. 安全要求**
- **数据加密**：使用AES-256加密算法保护敏感数据
- **网络安全**：支持HTTPS/TLS 1.3协议
- **代码混淆**：生产版本支持代码混淆和反调试
- **证书验证**：支持SSL证书固定，防止中间人攻击

## 软件技术

### 技术栈
Fridgy 采用现代化的技术栈，确保高性能、可维护性和跨平台兼容性：

**1. 前端框架与运行时**
- **React 19.0.0**：最新版本的React框架，提供最新的特性和性能优化
- **React Native 0.79.5**：跨平台移动应用开发框架，实现一套代码多平台运行
- **Expo SDK 53.0.22**：提供丰富的原生功能封装和开发工具链
- **TypeScript 5.8.3**：提供静态类型检查，提高代码质量和开发效率

**2. 路由与导航系统**
- **expo-router 5.1.5**：基于文件系统的路由管理，支持嵌套路由和动态路由
- **react-native-screens 4.11.1**：原生屏幕管理，提升导航性能
- **react-native-safe-area-context 5.4.0**：安全区域管理，适配各种屏幕尺寸

**3. UI组件与交互**
- **react-native-paper 5.12.0**：Material Design风格的UI组件库
- **react-native-gesture-handler 2.24.0**：高性能手势处理库，支持滑动删除等手势操作
- **react-native-reanimated 3.17.4**：高性能动画库，支持60fps流畅动画
- **react-native-svg 15.11.2**：矢量图形支持，用于图标和图表渲染
- **expo-linear-gradient 14.1.5**：渐变背景支持
- **PanResponder**（v1.1.0新增）：React Native原生手势响应系统，用于实现滑动删除功能

**4. 原生功能模块**
- **expo-camera 16.1.11**：相机功能，支持拍照和扫码
- **expo-notifications 0.31.4**：本地和远程通知管理
- **expo-file-system 18.1.11**：文件系统操作，支持文件读写
- **expo-image-picker 16.1.4**：图片选择器，支持相册和拍照
- **expo-device 7.1.4**：设备信息获取
- **expo-constants 17.1.7**：应用常量管理
- **expo-secure-store 14.2.4**：安全存储，用于敏感数据加密存储
- **expo-haptics 14.1.4**：触觉反馈支持
- **expo-location 18.1.6**：地理位置服务
- **expo-linking 7.1.7**：深度链接支持
- **expo-sharing 13.1.5**：文件分享功能
- **@react-native-voice/voice 3.2.4**（v1.1.0新增）：语音识别功能，支持移动端原生语音识别
- **expo-application 7.0.7**（v1.1.0新增）：应用信息获取，用于版本检查和更新

**5. 状态管理与数据存储**
- **zustand 4.4.0**：轻量级状态管理库，提供简洁的API
- **@react-native-async-storage/async-storage 2.1.2**：异步存储，用于本地数据持久化
- **@react-native-community/datetimepicker 8.4.1**：日期时间选择器
- **@react-native-community/netinfo 11.4.1**：网络状态检测

**6. 工具库与辅助功能**
- **date-fns 2.30.0**：现代JavaScript日期处理库
- **babel-plugin-module-resolver 5.0.2**：模块路径解析
- **react-native-web 0.20.0**：Web平台支持

**7. 开发工具与质量保证**
- **ESLint 8.0.0**：代码质量检查工具
- **Prettier 3.0.0**：代码格式化工具
- **Jest 29.0.0**：单元测试框架
- **@testing-library/react-native 12.8.0**：React Native测试工具
- **TypeScript ESLint**：TypeScript代码检查

**8. 构建与部署**
- **EAS Build**：Expo应用构建服务
- **EAS Submit**：应用商店提交服务
- **Metro**：React Native打包工具
- **Hermes**：JavaScript引擎（Android）

### 架构设计
Fridgy 采用分层架构设计，确保代码的可维护性、可扩展性和高性能：

**1. 整体架构模式**
- **分层架构**：采用经典的分层架构模式，将应用分为表现层、业务逻辑层、数据访问层
- **模块化设计**：每个功能模块独立开发，通过接口进行交互
- **组件化开发**：UI组件高度复用，减少代码冗余
- **插件化扩展**：预留扩展接口，支持功能模块的动态加载

**2. 目录结构与职责划分**
```
src/
├── app/                    # 应用入口和路由配置
│   ├── _layout.tsx        # 根布局组件
│   ├── index.tsx          # 首页
│   └── (tabs)/            # Tab导航页面
│       ├── overview/      # 概览页面
│       ├── statistics/    # 统计页面
│       └── settings/      # 设置页面
├── components/            # 可复用UI组件
│   ├── ui/               # 基础UI组件
│   │   ├── SwipeToDelete.tsx    # 滑动删除组件（v1.1.0新增）
│   │   ├── ClearDataModal.tsx    # 数据清理模态框（v1.1.0新增）
│   │   └── LongPressDelete.tsx   # 长按删除组件（v1.1.0新增）
│   ├── ingredients/      # 食材相关组件
│   │   └── VoiceInputButton.tsx # 语音输入按钮（v1.1.0新增）
│   ├── ai/               # AI功能组件
│   │   └── SeasonalFruitsCard.tsx # 当季水果卡片（v1.1.0新增）
│   ├── version/          # 版本管理组件（v1.1.0新增）
│   │   └── VersionUpdateModal.tsx # 版本更新模态框
│   └── navigation/       # 导航组件
│       └── SwipeTabNavigator.tsx # 滑动导航（v1.1.0优化）
├── services/             # 业务服务层
│   ├── ai/               # AI服务适配
│   │   └── seasonalFruits.ts     # 当季水果服务（v1.1.0新增）
│   ├── api/              # API接口服务
│   ├── notifications/    # 通知服务
│   │   └── seasonalFruitsScheduler.ts # 季节性通知调度（v1.1.0新增）
│   ├── data/             # 数据服务（v1.1.0新增）
│   │   └── dataClearService.ts  # 数据清理服务
│   ├── version/          # 版本管理服务（v1.1.0新增）
│   │   └── versionChecker.ts     # 版本检查服务
│   ├── rating/           # 应用评分服务（v1.1.0新增）
│   │   └── appRating.ts          # 评分管理
│   └── speech/           # 语音识别服务（v1.1.0新增）
├── store/                # 状态管理
│   ├── ingredients/      # 食材状态
│   └── settings/         # 设置状态
├── hooks/                # 自定义Hooks（v1.1.0新增）
│   └── useSpeechRecognition.ts  # 语音识别Hook
└── utils/                # 工具函数
    ├── constants/        # 常量定义
    ├── helpers/          # 辅助函数
    └── types/            # 类型定义
```

**3. 表现层（Presentation Layer）**
- **页面组件**：`src/app/**`，基于expo-router的文件系统路由
  - 概览页面：展示食材总览和关键指标
  - 扫描页面：提供扫码和拍照功能
  - 统计页面：数据可视化和分析报告
  - 设置页面：用户偏好和应用配置
- **UI组件**：`src/components/**`，高度复用的界面组件
  - 基础组件：Button、Card、Badge等通用组件
  - 业务组件：IngredientCard、EditModal、AIModal等
  - 复合组件：结合多个基础组件的复杂界面

**4. 业务逻辑层（Business Logic Layer）**
- **服务层**：`src/services/**`，封装业务逻辑和外部服务
  - AI服务：统一AI接口，支持多模型切换
  - API服务：网络请求和数据同步
  - 通知服务：本地通知调度和管理
  - 权限服务：系统权限请求和处理
- **状态管理**：`src/store/**`，使用Zustand管理应用状态
  - 食材状态：食材列表、筛选条件、编辑状态
  - 设置状态：用户偏好、提醒策略、主题设置
  - 全局状态：网络状态、加载状态、错误信息

**5. 数据访问层（Data Access Layer）**
- **本地存储**：AsyncStorage和SecureStore
  - 食材数据：存储在AsyncStorage中
  - 敏感信息：使用SecureStore加密存储
  - 缓存数据：临时数据和图片缓存
- **网络服务**：API调用和数据同步
  - RESTful API：标准HTTP接口
  - 数据同步：增量同步和冲突解决
  - 离线支持：本地优先，网络补充

**6. 通知调度系统**
- **调度策略**：
  - 基于食材到期日计算提醒时间
  - 支持多级提醒（临期前3天、1天、到期日）
  - 用户可自定义提醒时间和方式
- **通知管理**：
  - 应用启动时重建通知计划
  - 数据变更时更新相关通知
  - 系统重启后通过引导恢复通知
- **权限处理**：
  - 渐进式权限请求
  - 权限被拒绝时的降级方案
  - 用户友好的权限说明

**7. AI适配架构**
- **统一接口**：`services/ai`定义标准接口
  - analyze：食材分析接口
  - advise：建议生成接口
  - 统一的输入输出格式
- **多模型支持**：
  - DeepSeek：主要AI服务提供商
  - Zhipu：备选AI服务提供商
  - Mock：离线演示和测试
- **智能切换**：
  - 根据网络状态自动切换
  - 用户可手动选择AI模型
  - 支持运行时热切换

**8. 异常处理与容错机制**
- **权限处理**：
  - 相机权限：提供手动输入替代方案
  - 通知权限：使用应用内提醒作为备选
  - 存储权限：提供数据导出功能
- **网络异常**：
  - 离线模式：核心功能本地可用
  - 重试机制：网络恢复后自动重试
  - 用户提示：清晰的错误信息和解决建议
- **数据异常**：
  - 数据校验：输入数据格式验证
  - 数据恢复：损坏数据的自动修复
  - 备份机制：定期数据备份和恢复

### 数据模型（核心）
Fridgy 采用以"食材"为中心的数据模型设计，确保数据的完整性和扩展性：

**1. 核心实体模型**

**Ingredient（食材实体）**
```typescript
interface Ingredient {
  // 基础标识
  id: string;                    // 唯一标识符（UUID）
  name: string;                  // 食材名称
  description?: string;          // 食材描述（可选）
  
  // 分类信息
  category: string;              // 品类分类（蔬菜、肉类、乳制品等）
  subcategory?: string;          // 子分类（可选）
  tags: string[];                // 标签数组（有机、进口、特价等）
  
  // 存储信息
  location: string;              // 存放位置（冷藏、冷冻、常温、冷冻室上层等）
  storageMethod?: string;        // 存储方法（密封、通风、避光等）
  
  // 数量与单位
  quantity: number;              // 数量
  unit: string;                  // 计量单位（个、g、ml、袋、盒等）
  originalQuantity?: number;     // 原始采购数量（可选）
  originalUnit?: string;         // 原始单位（可选）
  
  // 时间信息
  purchaseDate?: Date;           // 采购日期（可选）
  expireAt: Date;                // 到期/最佳食用日期
  openedAt?: Date;               // 开封日期（可选）
  createdAt: Date;               // 创建时间
  updatedAt: Date;               // 更新时间
  
  // 媒体信息
  imageUri?: string;             // 食材图片URI
  barcode?: string;              // 条码信息（可选）
  
  // 状态信息
  status: 'fresh' | 'expiring' | 'expired';  // 当前状态
  isOpened: boolean;             // 是否已开封
  isFavorite: boolean;           // 是否收藏
  
  // 扩展信息
  price?: number;                // 价格（可选）
  source?: string;               // 来源（超市、菜市场、网购等）
  notes?: string;                // 备注信息
}
```

**2. 辅助数据模型**

**Category（品类模型）**
```typescript
interface Category {
  id: string;
  name: string;                  // 品类名称
  icon: string;                  // 图标标识
  color: string;                 // 主题颜色
  defaultExpiryDays: number;     // 默认保质期天数
  storageLocation: string;       // 默认存储位置
  isActive: boolean;             // 是否启用
}
```

**Unit（单位模型）**
```typescript
interface Unit {
  id: string;
  name: string;                  // 单位名称
  symbol: string;                // 单位符号
  type: 'weight' | 'volume' | 'count' | 'length';  // 单位类型
  conversionFactor?: number;     // 转换系数（可选）
}
```

**NotificationRule（通知规则模型）**
```typescript
interface NotificationRule {
  id: string;
  name: string;                  // 规则名称
  daysBeforeExpiry: number;      // 到期前天数
  isEnabled: boolean;            // 是否启用
  message: string;               // 通知消息模板
  soundEnabled: boolean;         // 是否启用声音
  vibrationEnabled: boolean;     // 是否启用震动
}
```

**3. 状态计算逻辑**

**状态判定算法**
```typescript
function calculateIngredientStatus(ingredient: Ingredient): 'fresh' | 'expiring' | 'expired' {
  const today = new Date();
  const expireDate = new Date(ingredient.expireAt);
  const daysUntilExpiry = Math.ceil((expireDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));
  
  if (daysUntilExpiry < 0) {
    return 'expired';  // 已过期
  } else if (daysUntilExpiry <= 3) {  // 3天内到期
    return 'expiring';  // 临期
  } else {
    return 'fresh';  // 新鲜
  }
}
```

**4. 数据关系设计**

**一对多关系**
- 一个用户可以有多个食材记录
- 一个品类可以对应多个食材
- 一个食材可以有多个通知记录

**多对多关系**
- 食材与标签：一个食材可以有多个标签，一个标签可以对应多个食材
- 食材与菜谱：一个食材可以用于多个菜谱，一个菜谱可以包含多个食材

**5. 数据验证规则**

**输入验证**
- 食材名称：必填，长度1-50字符
- 数量：必填，大于0的数值
- 到期日期：必填，不能早于当前日期
- 品类：必填，必须从预定义列表中选择
- 存储位置：必填，必须从预定义列表中选择

**业务规则**
- 开封后的食材保质期自动缩短
- 临期食材优先显示在列表顶部
- 过期食材自动标记但保留记录
- 重复食材自动合并或提示

**6. 数据索引策略**

**主要索引**
- 按状态索引：快速筛选新鲜/临期/过期食材
- 按品类索引：快速按品类分组显示
- 按到期日期索引：快速排序和提醒
- 按存储位置索引：快速按位置查看

**复合索引**
- 状态+到期日期：优化临期提醒查询
- 品类+状态：优化统计页面查询
- 用户+创建时间：优化数据同步查询

**7. 数据迁移与版本控制**

**版本管理**
- 数据模型版本号：每次结构变更递增
- 向后兼容：新版本支持旧数据格式
- 自动迁移：检测版本差异并自动升级

**数据备份**
- 增量备份：只备份变更的数据
- 定期全量备份：确保数据安全
- 云端同步：支持多设备数据同步

## 软件功能

### 分点叙述
Fridgy 提供全面的食材管理功能，每个功能模块都经过精心设计，确保用户体验的流畅性和功能的实用性：

**1. 智能食材管理**
- **基础CRUD操作**：
  - 新增食材：支持手动输入、扫码识别、拍照识别等多种方式
  - 编辑食材：实时编辑，支持修改所有属性信息
  - 删除食材：支持单个删除和批量删除，带确认机制
  - 复制食材：快速复制相似食材，减少重复输入

- **智能录入辅助**：
  - 字典选择：品类、单位、存储位置等从预定义字典中选择
  - 自动补全：基于历史记录提供智能补全建议
  - 模板功能：常用食材模板，一键快速添加
  - 批量导入：支持从Excel、CSV等格式批量导入食材

- **图片管理**：
  - 拍照功能：集成相机，直接拍摄食材照片
  - 相册选择：从设备相册选择已有图片
  - 图片编辑：支持裁剪、旋转、滤镜等基础编辑
  - 图片压缩：自动压缩图片，节省存储空间

**2. 扫描与识别功能**
- **条码扫描**：
  - 支持多种条码格式：EAN-13、UPC-A、Code128等
  - 自动识别商品信息：名称、品牌、规格等
  - 网络查询：连接商品数据库，获取详细信息
  - 手动补充：扫描失败时支持手动输入

- **图像识别**：
  - AI图像识别：通过拍照自动识别食材类型
  - 文字识别：OCR技术识别包装上的文字信息
  - 智能分类：自动推荐合适的品类和存储位置
  - 置信度显示：显示识别结果的置信度

**3. 智能状态监控与提醒**
- **状态自动计算**：
  - 实时状态更新：基于当前时间自动计算食材状态
  - 多状态支持：新鲜、临期、过期三种状态
  - 视觉标识：不同颜色和图标区分食材状态
  - 状态历史：记录状态变化历史，便于分析

- **智能提醒系统**：
  - 多级提醒：支持设置多个提醒时间点
  - 个性化策略：不同食材可设置不同的提醒策略
  - 本地通知：使用expo-notifications实现本地推送
  - 提醒历史：记录提醒发送历史，避免重复提醒

- **概览与统计**：
  - 仪表板：直观显示关键指标和统计数据
  - 图表展示：饼图、柱状图、趋势图等多种图表
  - 分类统计：按品类、状态、位置等维度统计
  - 趋势分析：分析食材使用和浪费趋势

**4. AI智能建议系统**
- **烹饪建议**：
  - 菜谱推荐：基于现有食材推荐合适菜谱
  - 营养搭配：根据营养学原理推荐搭配方案
  - 制作步骤：提供详细的制作步骤和技巧
  - 难度评估：标注菜谱制作难度和时间

- **保鲜建议**：
  - 存储建议：针对不同食材提供最佳存储方法
  - 保鲜技巧：提供延长食材保质期的实用技巧
  - 处理建议：临期食材的处理和利用建议
  - 季节性建议：结合时令特点提供建议

- **采购建议**：
  - 库存分析：分析当前库存，推荐需要补充的食材
  - 采购清单：生成智能采购清单，避免遗漏
  - 价格比较：提供价格参考和购买建议
  - 季节性采购：推荐应季食材和最佳采购时机

**5. 个性化设置与配置**
- **字典管理**：
  - 品类管理：自定义食材品类，支持添加、编辑、删除
  - 单位管理：管理计量单位，支持单位转换
  - 位置管理：自定义存储位置，适应不同家庭环境
  - 标签管理：创建和管理自定义标签

- **提醒策略配置**：
  - 默认策略：设置默认的提醒时间和方式
  - 个性化策略：为特定食材设置专门的提醒策略
  - 提醒模板：创建和编辑提醒消息模板
  - 免打扰时间：设置免打扰时间段

- **界面与主题**：
  - 主题切换：支持浅色、深色主题
  - 字体大小：可调节字体大小，适应不同用户需求
  - 布局设置：自定义界面布局和显示选项
  - 多语言支持：支持中文、英文等多种语言

**6. 数据管理与安全**
- **本地存储**：
  - AsyncStorage：存储食材数据和用户设置
  - SecureStore：加密存储敏感信息如API密钥
  - 数据压缩：自动压缩存储数据，节省空间
  - 数据清理：定期清理临时文件和缓存

- **数据同步**：
  - 云端备份：支持数据云端备份和恢复
  - 多设备同步：多设备间数据实时同步
  - 冲突解决：智能处理数据冲突
  - 离线支持：离线模式下正常使用核心功能

- **数据导出**：
  - 格式支持：支持导出为Excel、CSV、JSON等格式
  - 选择性导出：可选择导出特定时间段或类型的数据
  - 数据统计：导出包含统计信息的报告
  - 分享功能：支持通过邮件、社交平台分享数据

**7. 高级功能**
- **数据分析**：
  - 使用模式分析：分析用户的食材使用模式
  - 浪费分析：统计和分析食材浪费情况
  - 成本分析：计算和分析食材采购成本
  - 营养分析：分析营养摄入情况

- **社交功能**：
  - 菜谱分享：分享自己创建的菜谱
  - 经验交流：与其他用户交流食材管理经验
  - 社区功能：参与食材管理社区讨论
  - 成就系统：完成特定任务获得成就

- **集成功能**：
  - 购物清单：与购物应用集成，生成购物清单
  - 日历集成：与日历应用集成，安排用餐计划
  - 健康应用：与健康应用集成，跟踪营养摄入
  - 智能家居：与智能冰箱等设备集成

**8. v1.1.0 新增功能模块**

- **语音识别输入系统**：
  - 语音转文字：支持通过语音输入快速添加食材信息
  - 多语言识别：支持中文、英文等多种语言的语音识别
  - 实时转录：语音输入过程中实时显示识别结果
  - 智能解析：自动识别食材名称和存储位置信息
  - 跨平台支持：Web端使用Web Speech API，移动端支持原生语音识别
  - 交互反馈：提供录音动画、脉冲效果等视觉反馈
  - 错误处理：识别失败时提供友好的错误提示和重试机制

- **当季水果智能推荐系统**：
  - AI驱动推荐：基于智谱AI和DeepSeek AI智能推荐当前季节的最佳水果
  - 自动定时更新：每天早上8点自动调用AI更新当季水果信息
  - 智能缓存机制：避免频繁调用AI，节省成本并提升响应速度
  - 多级降级策略：AI服务不可用时自动切换到本地数据库
  - 季节主题适配：根据当前季节显示不同的颜色和图标
  - 详细信息展示：显示每种水果的营养价值、保存技巧等详细信息
  - 手动刷新功能：用户可随时手动刷新获取最新信息
  - 季节性通知：定时推送当季水果推荐通知

- **数据清理管理系统**：
  - 全面数据清理：支持清除食材数据、设置数据、通知数据和文件数据
  - 选择性清理：用户可选择清理特定类型的数据
  - 安全确认机制：采用长按确认机制，防止误操作
  - 进度可视化：清理过程中显示进度条和百分比
  - 状态重置：支持将设置重置为默认值
  - 文件管理：自动识别并清理应用相关的文件
  - 通知取消：清理数据时自动取消所有相关通知
  - 结果反馈：清理完成后显示详细的成功或错误信息

- **版本更新检查系统**：
  - 自动版本检测：应用启动时自动检查是否有新版本
  - 版本信息展示：显示当前版本和最新版本号
  - 更新日志展示：展示新版本的更新内容和特性
  - 强制更新支持：支持强制更新模式，确保用户使用最新版本
  - 应用商店跳转：一键跳转到应用商店进行更新
  - 多平台支持：支持iOS App Store和Google Play商店
  - 用户友好提示：提供清晰的更新提示和操作指引

- **滑动删除交互系统**：
  - 手势识别：基于React Native PanResponder实现滑动删除
  - 视觉反馈：滑动时提供颜色渐变和动画效果
  - 阈值控制：可配置的滑动阈值和删除阈值，防止误触
  - 确认机制：滑动超过阈值后显示确认按钮
  - 长按备用方案：提供长按删除作为备用交互方式
  - 动画优化：使用原生驱动动画，确保流畅体验
  - 状态管理：完善的删除状态管理和错误处理

- **应用评分系统**：
  - 智能评分提示：在合适的时机提示用户进行应用评分
  - 评分策略：基于使用频率、功能使用情况等智能判断评分时机
  - 应用商店跳转：一键跳转到应用商店进行评分
  - 用户友好：提供"稍后提醒"选项，不强制用户立即评分
  - 多平台支持：支持iOS和Android平台的应用商店评分

- **季节性通知系统**：
  - 定时任务调度：每天早上8点自动触发当季水果信息更新
  - 通知推送：更新完成后自动推送当季水果推荐通知
  - 智能缓存：避免重复调用AI服务，节省成本
  - 通知管理：支持取消和重新安排通知
  - 用户偏好：支持用户自定义通知时间和频率

——
版本信息与规模（参考）：
- 当前版本：1.1.0（`app.json`）
- 之前版本：1.0.0（已申请软著）
- 源程序行数（`src` 下 .ts/.tsx/.js/.jsx）：约 18,737 行（v1.1.0统计时点）
- 代码增长：相比v1.0.0版本（12,349行）增加了约 51.7%
- 新增功能模块：7个主要功能模块（语音识别、当季水果推荐、数据清理、版本更新、滑动删除、应用评分、季节性通知）

提交建议：
- 源代码鉴别材料以 `src/**` 的 `.ts/.tsx` 为主；
- 可附代表性配置（`package.json`、`app.json`、`tsconfig.json` 等）以增强可识别性；
- 不含第三方依赖与资源文件。


